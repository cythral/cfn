<Project Sdk="Microsoft.NET.Sdk">

  <PropertyGroup>
    <OutputType>Exe</OutputType>
    <TargetFramework>netcoreapp3.1</TargetFramework>
    <IsTestProject>true</IsTestProject>
  </PropertyGroup>
  
  <ItemGroup>
    <PackageReference Include="FluentAssertions" Version="5.9.0" />
    <PackageReference Include="Microsoft.NET.Test.Sdk" Version="16.2.0" />
    <PackageReference Include="NSubstitute" Version="4.2.1" />
    <PackageReference Include="NUnit" Version="3.12.0" />
    <PackageReference Include="NUnit3TestAdapter" Version="3.13.0" />
    <PackageReference Include="RichardSzalay.MockHttp" Version="5.0.0" />
  </ItemGroup>
  
  <ItemGroup>
    <ProjectReference Include="..\..\src\Core\UpdateTargets\UpdateTargets.csproj" />
    <ProjectReference Include="..\..\src\Core\StackDeploymentStatus\StackDeploymentStatus.csproj" />
    <ProjectReference Include="..\..\src\Core\StackDeployment\StackDeployment.csproj" />
    <ProjectReference Include="..\..\src\Core\S3Deployment\S3Deployment.csproj" />
    <ProjectReference Include="..\..\src\Core\GithubWebhook\GithubWebhook.csproj" />
    <ProjectReference Include="..\..\src\Core\ExtractFileFromZip\ExtractFileFromZip.csproj" />
    <ProjectReference Include="..\..\src\Core\DeploymentSupersession\DeploymentSupersession.csproj" />
    <ProjectReference Include="..\..\src\Core\ApprovalNotification\ApprovalNotification.csproj" />
    <ProjectReference Include="..\..\src\Core\ApprovalWebhook\ApprovalWebhook.csproj" />
    <ProjectReference Include="..\..\src\Core\S3TagOutdatedArtifacts\S3TagOutdatedArtifacts.csproj" />
  </ItemGroup>

  <Target Name="AddPackageAliases" AfterTargets="ResolveProjectReferences" BeforeTargets="FindReferenceAssembliesForReferences;ResolveReferences">
    <ItemGroup>
        <ReferencePath Condition="'%(FileName)'=='S3TagOutdatedArtifacts'">
            <Aliases>S3TagOutdated</Aliases>
        </ReferencePath>

        <ReferencePath Condition="'%(FileName)'=='StackDeployment'">
            <Aliases>StackDeployment</Aliases>
        </ReferencePath>
    </ItemGroup>
  </Target>
</Project>
